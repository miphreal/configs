# History command configuration
HISTSIZE=50000
SAVEHIST=10000
setopt extended_history       # record timestamp of command in HISTFILE
setopt hist_expire_dups_first # delete duplicates first when HISTFILE size exceeds HISTSIZE
setopt hist_ignore_dups       # ignore duplicated commands history list
setopt hist_ignore_space      # ignore commands that start with space
setopt hist_verify            # show command with history expansion to user before running it
setopt share_history          # share command history data
setopt append_history           
setopt hist_find_no_dups
setopt hist_reduce_blanks

# Correction
setopt correct
setopt correct_all

# Directories
setopt auto_cd
setopt auto_pushd
setopt pushd_ignore_dups
setopt pushdminus
setopt no_case_glob


setopt multios              # enable redirect to multiple streams: echo >file1 >file2
setopt long_list_jobs       # show long list format job notifications
setopt interactivecomments  # recognize comments


# config for zsh-history-substring-search
bindkey '^K' history-substring-search-up
bindkey '^J' history-substring-search-down

# config for zsh-autosuggestions
bindkey '^L' autosuggest-execute


# history
autoload -Uz up-line-or-beginning-search down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search
function remove-from-history {
    echo "Removing $1 from history..."
    LC_ALL=C test $1 && sed -i "/$1/d" $HISTFILE
    fc -R
    zsh
}

# completion
if type brew &>/dev/null
then
  FPATH="$(brew --prefix)/share/zsh/site-functions:${FPATH}"
fi

# ssh
(eval "$(ssh-agent -s)") > /dev/null
(ssh-add $HOME/.ssh/id_github) 2> /dev/null
alias ssh="kitty +kitten ssh"

# ls
alias -g ls=exa
alias -g ll='exa -la'

# git
alias gitst='git status -sb'
alias gitcb='git rev-parse --symbolic-full-name --abbrev-ref HEAD'
alias gitc='lazygit'
alias gitco='git checkout'
alias gitb='git branch'
function gitlb(){
    git for-each-ref --format='%(refname:short)' --sort=-authordate --count=10 refs/heads/;
}
alias git-count='git shortlog -sn'
alias git-undo='git reset --soft HEAD^'
alias git-clear='git reset --hard HEAD'
alias gits='git stash'
alias gitsb='git checkout $(git branch | fzf)'
alias git-push='git push origin $(gitcb)'
alias git-pull='git pull origin $(gitcb)'

# containers
alias dkc='docker-compose'


# go
export PATH="/usr/local/go/bin:$HOME/go/bin:$PATH"

{{ dep('../nvm').zsh_rc }}
{{ dep('../pyenv').zsh_rc }}
{{ dep('../starship').zsh_rc }}

{{ dep('macos:direnv').zsh_rc }}
{{ dep('macos:asdf').zsh_rc }}

# Initialize completion
autoload -Uz compinit && compinit
